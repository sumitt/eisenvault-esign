(function(){Alfresco.FileUpload=function(d){var c=Alfresco.util.ComponentManager.get(d);if(c!==null){throw new Error("An instance of Alfresco.FileUpload already exists.")}Alfresco.FileUpload.superclass.constructor.call(this,"Alfresco.FileUpload",d);return this};YAHOO.extend(Alfresco.FileUpload,Alfresco.component.Base,{options:{adobeFlashEnabled:false,flashUploader:"Alfresco.FlashUpload",htmlUploader:"Alfresco.HtmlUpload",dndUploader:"Alfresco.DNDUpload"},uploader:null,MODE_SINGLE_UPLOAD:1,MODE_SINGLE_UPDATE:2,MODE_MULTI_UPLOAD:3,defaultShowConfig:{siteId:null,containerId:null,destination:null,uploadDirectory:null,updateNodeRef:null,updateFilename:null,mode:this.MODE_SINGLE_UPLOAD,filter:[],onFileUploadComplete:null,overwrite:false,thumbnails:null,htmlUploadURL:null,flashUploadURL:null,username:null},showConfig:{},show:function a(e){if(this.uploader===null||(this.uploader.name==this.options.flashUploader&&!this.options.adobeFlashEnabled)){this.hasRequiredFlashPlayer=this.options.adobeFlashEnabled&&!Alfresco.util.getVar("noflash")&&Alfresco.util.hasRequiredFlashPlayer(9,0,45);if(this.hasRequiredFlashPlayer&&YAHOO.env.ua.ie==0){this.canAccessSession=(YAHOO.util.Cookie.get("JSESSIONID")||"").length>0;this.hasRequiredFlashPlayer=this.canAccessSession}this.browserSupportsHTML5=(window.File&&window.FileList);var f;if(this.browserSupportsHTML5){f=this.options.dndUploader}else{if(this.hasRequiredFlashPlayer){f=this.options.flashUploader}else{f=this.options.htmlUploader}}var g=Alfresco.util.ComponentManager.findFirst(f);if(g){this.uploader=g}else{throw new Error("No instance of uploader type '"+f+"' exists.")}}this.showConfig=YAHOO.lang.merge(this.defaultShowConfig,e);if(!this.hasRequiredFlashPlayer&&this.showConfig.mode==this.MODE_MULTI_UPLOAD){if(this.browserSupportsHTML5){}else{this.showConfig.mode=this.MODE_SINGLE_UPLOAD}}if(this.hasRequiredFlashPlayer||this.browserSupportsHTML5){this.showConfig.uploadURL=this.showConfig.flashUploadURL}else{this.showConfig.uploadURL=this.showConfig.htmlUploadURL;this.showConfig.adobeFlashEnabled=this.options.adobeFlashEnabled&&this.canAccessSession}if(this.options.zIndex!==undefined&&this.options.zIndex>0&&(this.uploader.widgets.panel!==undefined||this.uploader.panel!==undefined)){var h=this.uploader.widgets.panel;if(this.uploader.panel!==undefined){var h=this.uploader.panel}var d=this.options.zIndex+2;var c=function(){elements=Dom.getElementsByClassName("mask");for(i=0,j=elements.length;i<j;i++){Dom.setStyle(elements[i],"zIndex",d-1)}Dom.setStyle(h.element,"zIndex",d);h.cfg.setProperty("zIndex",d,true)};h.beforeShowEvent.subscribe(c,h,true)}this.uploader.show(this.showConfig)},hide:function b(){if(this.uploader===null){}else{this.uploader.hide()}}})})();Alfresco.getFileUploadInstance=function(){var a="alfresco-fileupload-instance";return Alfresco.util.ComponentManager.get(a)||new Alfresco.FileUpload(a)};Alfresco.getDNDUploadProgressInstance=function(){var b="Alfresco.DNDUpload";var a=Alfresco.util.ComponentManager.findFirst(b);return a};